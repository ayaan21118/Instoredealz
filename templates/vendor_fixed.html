{% extends "base.html" %}

{% block title %}Vendor Portal - Instoredealz{% endblock %}

{% block body_class %}vendor-page{% endblock %}

{% block nav_actions %}
<a href="#" class="btn btn-outline-success me-2" data-bs-toggle="modal" data-bs-target="#vendorLoginModal">Vendor Login</a>
<a href="#" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#vendorSignupModal">Join as Vendor</a>
{% endblock %}

{% block content %}
<!-- Vendor Hero Section -->
<section class="vendor-hero bg-gradient-success text-white">
    <div class="container">
        <div class="row align-items-center min-vh-100 py-5">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">
                    Grow Your Business with <span class="text-warning">Instoredealz</span>
                </h1>
                <p class="lead mb-4">
                    Reach thousands of customers, increase foot traffic, and boost sales with our powerful vendor platform. Create compelling deals and watch your business grow.
                </p>
                <div class="d-flex gap-3 mb-4">
                    <a href="#signup" class="btn btn-warning btn-lg px-4">
                        <i class="fas fa-store me-2"></i>Start Selling
                    </a>
                    <a href="#dashboard" class="btn btn-outline-light btn-lg px-4">
                        View Dashboard
                    </a>
                </div>
                <div class="vendor-stats d-flex gap-4 mt-4">
                    <div class="stat-item">
                        <h4 class="fw-bold">1000+</h4>
                        <small>Active Vendors</small>
                    </div>
                    <div class="stat-item">
                        <h4 class="fw-bold">50K+</h4>
                        <small>Monthly Customers</small>
                    </div>
                    <div class="stat-item">
                        <h4 class="fw-bold">₹2L+</h4>
                        <small>Avg Monthly Sales</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="vendor-image text-center">
                    <img src="https://pixabay.com/get/g366e37621287addbebcc4d6e3f73d810ace53db6a1c08d35f9d8dbfe188cdd3cf2f57ab7ffe1d4c7891cf851e6be838de15a3f9ff367cb665f375e056489ad48_1280.jpg" 
                         alt="Store Owner" class="img-fluid rounded-3 shadow-lg">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Vendor Signup Form -->
<section id="signup" class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-lg border-0">
                    <div class="card-header bg-success text-white text-center py-4">
                        <h3 class="fw-bold mb-0">Join as a Partner Store</h3>
                        <p class="mb-0">Start attracting more customers with exclusive deals</p>
                    </div>
                    <div class="card-body p-5">
                        <form id="vendorSignupForm" class="row g-3">
                            <!-- Business/Store Name -->
                            <div class="col-md-6">
                                <label for="businessName" class="form-label">Business/Store Name *</label>
                                <input type="text" class="form-control" id="businessName" placeholder="Your Business Name" required>
                            </div>
                            
                            <!-- Owner/Full Name -->
                            <div class="col-md-6">
                                <label for="ownerName" class="form-label">Owner Full Name *</label>
                                <input type="text" class="form-control" id="ownerName" placeholder="Owner's Complete Name" required>
                            </div>
                            
                            <!-- Business Category -->
                            <div class="col-md-6">
                                <label for="businessCategory" class="form-label">Business Category *</label>
                                <select class="form-select" id="businessCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fashion">Fashion & Apparel</option>
                                    <option value="food">Food & Dining</option>
                                    <option value="electronics">Electronics & Gadgets</option>
                                    <option value="beauty">Health & Beauty</option>
                                    <option value="home">Home & Kitchen</option>
                                    <option value="books">Books & Stationery</option>
                                    <option value="sports">Sports & Fitness</option>
                                    <option value="automotive">Automotive</option>
                                    <option value="services">Services</option>
                                    <option value="grocery">Grocery & Daily Needs</option>
                                    <option value="jewelry">Jewelry & Accessories</option>
                                    <option value="pharmacy">Pharmacy & Medicine</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <!-- Phone Number -->
                            <div class="col-md-6">
                                <label for="phoneNumber" class="form-label">Phone Number *</label>
                                <input type="tel" class="form-control" id="phoneNumber" placeholder="+91 98765 43210" required>
                            </div>
                            
                            <!-- Email Address -->
                            <div class="col-12">
                                <label for="emailAddress" class="form-label">Email Address *</label>
                                <input type="email" class="form-control" id="emailAddress" placeholder="store@example.com" required>
                            </div>
                            
                            <!-- Create User ID -->
                            <div class="col-md-6">
                                <label for="createUserId" class="form-label">Create User ID *</label>
                                <input type="text" class="form-control" id="createUserId" placeholder="Enter unique user ID" required>
                                <div class="form-text">This will be your login username</div>
                            </div>
                            
                            <!-- Create Password -->
                            <div class="col-md-6">
                                <label for="createPassword" class="form-label">Create Password *</label>
                                <input type="password" class="form-control" id="createPassword" placeholder="Enter secure password" required>
                                <div class="form-text">Minimum 8 characters with special symbols</div>
                            </div>
                            
                            <!-- Store Address -->
                            <div class="col-12">
                                <label for="storeAddress" class="form-label">Store Address *</label>
                                <textarea class="form-control" id="storeAddress" rows="3" placeholder="Complete store address with pincode" required></textarea>
                            </div>
                            
                            <!-- City -->
                            <div class="col-md-6">
                                <label for="city" class="form-label">City *</label>
                                <input type="text" class="form-control" id="city" placeholder="Enter city name" required>
                            </div>
                            
                            <!-- PAN Card Number -->
                            <div class="col-md-6">
                                <label for="panCardNumber" class="form-label">PAN Card Number *</label>
                                <input type="text" class="form-control" id="panCardNumber" placeholder="ABCDE1234F" style="text-transform: uppercase;" required>
                            </div>
                            
                            <!-- Do you have GST Registration -->
                            <div class="col-12">
                                <label class="form-label">Do you have GST Registration? *</label>
                                <div class="mt-2">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="gstRegistration" id="gstYes" value="yes">
                                        <label class="form-check-label" for="gstYes">Yes</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="gstRegistration" id="gstNo" value="no">
                                        <label class="form-check-label" for="gstNo">No</label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- GST Number (appears when Yes is selected) -->
                            <div class="col-12" id="gstNumberContainer" style="display: none;">
                                <label for="gstNumber" class="form-label">GST Number *</label>
                                <input type="text" class="form-control" id="gstNumber" placeholder="22AAAAA0000A1Z5" style="text-transform: uppercase;">
                            </div>
                            
                            <!-- Agreement Checkbox -->
                            <div class="col-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="vendorTerms" required>
                                    <label class="form-check-label" for="vendorTerms">
                                        I agree to Instoredealz <a href="#" class="text-success" data-bs-toggle="modal" data-bs-target="#termsModal">Terms and Conditions</a> *
                                    </label>
                                </div>
                                <div class="form-text mt-2">
                                    By registering, you confirm that all information provided is accurate and you have the authority to represent this business.
                                </div>
                            </div>
                            
                            <!-- Submit Button -->
                            <div class="col-12 text-center">
                                <button type="submit" class="btn btn-success btn-lg px-5 py-3">
                                    <i class="fas fa-rocket me-2"></i>Register as Partner Store
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Deal Submission Form -->
<section class="bg-light py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Create Your First Deal</h2>
            <p class="text-muted">Attract more customers with irresistible offers</p>
        </div>
        
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow border-0">
                    <div class="card-body p-4">
                        <form id="dealSubmissionForm" class="row g-3">
                            <!-- Deal Title -->
                            <div class="col-12">
                                <label for="dealTitle" class="form-label">Deal Title *</label>
                                <input type="text" class="form-control" id="dealTitle" placeholder="e.g., 50% Off on All Summer Collection" required>
                            </div>
                            
                            <!-- Deal Description -->
                            <div class="col-12">
                                <label for="dealDescription" class="form-label">Deal Description *</label>
                                <textarea class="form-control" id="dealDescription" rows="4" placeholder="Describe your amazing offer in detail. Include what products/services are covered, any conditions, etc." required></textarea>
                            </div>
                            
                            <!-- Category -->
                            <div class="col-md-6">
                                <label for="dealCategory" class="form-label">Category *</label>
                                <select class="form-select" id="dealCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fashion">Fashion & Apparel</option>
                                    <option value="food">Food & Dining</option>
                                    <option value="electronics">Electronics & Gadgets</option>
                                    <option value="beauty">Health & Beauty</option>
                                    <option value="home">Home & Kitchen</option>
                                    <option value="books">Books & Stationery</option>
                                    <option value="sports">Sports & Fitness</option>
                                    <option value="automotive">Automotive</option>
                                    <option value="services">Services</option>
                                    <option value="grocery">Grocery & Daily Needs</option>
                                    <option value="jewelry">Jewelry & Accessories</option>
                                    <option value="pharmacy">Pharmacy & Medicine</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <!-- Discount Code -->
                            <div class="col-md-6">
                                <label for="discountCode" class="form-label">Discount Code</label>
                                <input type="text" class="form-control" id="discountCode" placeholder="e.g., SAVE50, WELCOME20" style="text-transform: uppercase;">
                                <div class="form-text">Optional. Leave blank if no code required.</div>
                            </div>
                            
                            <!-- Discount Percentage -->
                            <div class="col-md-6">
                                <label for="discountPercentage" class="form-label">Discount Percentage *</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="discountPercentage" min="1" max="90" placeholder="50" required>
                                    <span class="input-group-text">%</span>
                                </div>
                            </div>
                            
                            <!-- Deal Availability -->
                            <div class="col-md-6">
                                <label for="dealAvailability" class="form-label">Deal Availability *</label>
                                <select class="form-select" id="dealAvailability" required>
                                    <option value="">Select Availability</option>
                                    <option value="all_stores">All My Stores</option>
                                    <option value="selected_locations">Selected Locations</option>
                                </select>
                            </div>
                            
                            <!-- Selected Locations (appears when "Selected Locations" is chosen) -->
                            <div class="col-12" id="selectedLocationsContainer" style="display: none;">
                                <label class="form-label">Select Store Locations *</label>
                                <div class="border rounded p-3" style="max-height: 200px; overflow-y: auto;">
                                    <div class="form-check">
                                        <input class="form-check-input location-checkbox" type="checkbox" value="store_1" id="store1">
                                        <label class="form-check-label" for="store1">
                                            <strong>Fashion Central - Connaught Place</strong><br>
                                            <small class="text-muted">Block A, Connaught Place, New Delhi - 110001</small>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input location-checkbox" type="checkbox" value="store_2" id="store2">
                                        <label class="form-check-label" for="store2">
                                            <strong>Fashion Central - Khan Market</strong><br>
                                            <small class="text-muted">Shop 15, Khan Market, New Delhi - 110003</small>
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input location-checkbox" type="checkbox" value="store_3" id="store3">
                                        <label class="form-check-label" for="store3">
                                            <strong>Fashion Central - Select City Walk</strong><br>
                                            <small class="text-muted">Select City Walk Mall, Saket, New Delhi - 110017</small>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-text">Select one or more store locations where this deal will be available.</div>
                            </div>
                            
                            <!-- Deal Image Upload -->
                            <div class="col-12">
                                <label for="dealImage" class="form-label">Deal Image</label>
                                <div class="deal-image-upload">
                                    <input type="file" class="form-control" id="dealImage" accept="image/*" capture="environment">
                                    <div class="form-text">
                                        <i class="fas fa-camera me-1"></i>Take a photo or 
                                        <i class="fas fa-images me-1"></i>choose from gallery. Recommended size: 800x600px
                                    </div>
                                    
                                    <!-- Image Preview -->
                                    <div id="imagePreview" style="display: none;" class="mt-3">
                                        <img id="previewImg" src="" alt="Deal Image Preview" class="img-thumbnail" style="max-width: 200px; max-height: 150px;">
                                        <button type="button" class="btn btn-sm btn-outline-danger ms-2" id="removeImage">
                                            <i class="fas fa-trash"></i> Remove
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Validity Period -->
                            <div class="col-md-6">
                                <label for="validFrom" class="form-label">Valid From *</label>
                                <input type="date" class="form-control" id="validFrom" required>
                            </div>
                            <div class="col-md-6">
                                <label for="validTill" class="form-label">Valid Till *</label>
                                <input type="date" class="form-control" id="validTill" required>
                            </div>
                            
                            <!-- Vendor Terms and Conditions -->
                            <div class="col-12">
                                <label for="vendorTerms" class="form-label">Vendor Terms & Conditions</label>
                                <textarea class="form-control" id="vendorTerms" rows="4" placeholder="Enter any specific terms and conditions for this deal (e.g., minimum purchase amount, applicable only on certain products, not valid with other offers, etc.)"></textarea>
                                <div class="form-text">Optional. Add any specific conditions customers should know about this deal.</div>
                            </div>
                            
                            <!-- Agreement Checkbox -->
                            <div class="col-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="agreeInstoredealzTerms" required>
                                    <label class="form-check-label" for="agreeInstoredealzTerms">
                                        I agree to the <a href="#" class="text-primary" data-bs-toggle="modal" data-bs-target="#termsModal">Terms and Conditions of Instoredealz</a> *
                                    </label>
                                </div>
                                <div class="form-text">
                                    By creating this deal, you confirm that you have the authority to offer this discount and agree to honor all deal redemptions.
                                </div>
                            </div>
                            
                            <!-- Submit Button -->
                            <div class="col-12 text-center">
                                <button type="submit" class="btn btn-primary btn-lg px-5">
                                    <i class="fas fa-plus me-2"></i>Create Deal
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Terms & Conditions Modal -->
<div class="modal fade" id="termsModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Instoredealz - Vendor Terms & Conditions</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" style="max-height: 500px; overflow-y: auto;">
                <h6 class="fw-bold">1. Deal Creation & Approval</h6>
                <p>All deals submitted through Instoredealz are subject to review and approval. We reserve the right to reject deals that don't meet our quality standards or community guidelines.</p>
                
                <h6 class="fw-bold">2. Deal Honoring</h6>
                <p>Vendors must honor all approved deals throughout the validity period. Failure to honor deals may result in account suspension and penalties.</p>
                
                <h6 class="fw-bold">3. Pricing & Discounts</h6>
                <p>Vendors confirm that the original prices and discount percentages mentioned are accurate and not inflated. Misleading pricing practices are strictly prohibited.</p>
                
                <h6 class="fw-bold">4. Commission & Fees</h6>
                <p>Instoredealz charges a commission on successful deal redemptions as per the agreed vendor pricing plan. Commission rates are clearly mentioned in your vendor agreement.</p>
                
                <h6 class="fw-bold">5. Customer Service</h6>
                <p>Vendors are responsible for providing excellent customer service to deal users. Any complaints will be forwarded to vendors for resolution.</p>
                
                <h6 class="fw-bold">6. Content & Images</h6>
                <p>Vendors must own rights to all images and content uploaded. Images should accurately represent the products/services offered in the deal.</p>
                
                <h6 class="fw-bold">7. Compliance</h6>
                <p>All deals must comply with Indian laws, regulations, and consumer protection guidelines. Vendors are responsible for applicable taxes and legal compliance.</p>
                
                <h6 class="fw-bold">8. Account Termination</h6>
                <p>Instoredealz reserves the right to suspend or terminate vendor accounts for violations of these terms or fraudulent activities.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
// Vendor page specific JavaScript
document.addEventListener('DOMContentLoaded', function() {
    // Handle GST registration toggle
    const gstYes = document.getElementById('gstYes');
    const gstNo = document.getElementById('gstNo');
    const gstNumberContainer = document.getElementById('gstNumberContainer');
    const gstNumberInput = document.getElementById('gstNumber');
    
    if (gstYes && gstNo) {
        gstYes.addEventListener('change', function() {
            if (this.checked) {
                gstNumberContainer.style.display = 'block';
                gstNumberInput.required = true;
            }
        });
        
        gstNo.addEventListener('change', function() {
            if (this.checked) {
                gstNumberContainer.style.display = 'none';
                gstNumberInput.required = false;
                gstNumberInput.value = '';
            }
        });
    }

    // Handle deal availability change
    const dealAvailability = document.getElementById('dealAvailability');
    const selectedLocationsContainer = document.getElementById('selectedLocationsContainer');
    
    if (dealAvailability) {
        dealAvailability.addEventListener('change', function() {
            if (this.value === 'selected_locations') {
                selectedLocationsContainer.style.display = 'block';
            } else {
                selectedLocationsContainer.style.display = 'none';
            }
        });
    }
    
    // Handle image upload and preview
    const dealImage = document.getElementById('dealImage');
    const imagePreview = document.getElementById('imagePreview');
    const previewImg = document.getElementById('previewImg');
    const removeImageBtn = document.getElementById('removeImage');
    
    if (dealImage) {
        dealImage.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('Image size should be less than 5MB');
                    this.value = '';
                    return;
                }
                
                if (!file.type.startsWith('image/')) {
                    alert('Please select a valid image file');
                    this.value = '';
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImg.src = e.target.result;
                    imagePreview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });
    }
    
    if (removeImageBtn) {
        removeImageBtn.addEventListener('click', function() {
            dealImage.value = '';
            imagePreview.style.display = 'none';
            previewImg.src = '';
        });
    }

    // Set minimum date for validity fields
    const validFrom = document.getElementById('validFrom');
    const validTill = document.getElementById('validTill');
    const today = new Date().toISOString().split('T')[0];
    
    if (validFrom) {
        validFrom.min = today;
        validFrom.addEventListener('change', function() {
            if (validTill) {
                validTill.min = this.value;
            }
        });
    }
    
    if (validTill) {
        validTill.min = today;
    }

    // Enhanced vendor signup form validation
    document.getElementById('vendorSignupForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('विक्रेता आवेदन सफलतापूर्वक जमा किया गया! हम 24 घंटे के भीतर इसकी समीक्षा करके आपसे संपर्क करेंगे। (Vendor application submitted successfully! We will review and get back to you within 24 hours.)');
    });

    // Enhanced deal submission form
    document.getElementById('dealSubmissionForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('डील सफलतापूर्वक बनाई गई! इसे 2 घंटे के भीतर रिव्यू करके प्रकाशित किया जाएगा। (Deal created successfully! It will be reviewed and published within 2 hours.)');
    });
});
</script>
{% endblock %}