{% extends "base.html" %}

{% block title %}Super Admin Portal - Instoredealz{% endblock %}

{% block body_class %}super-admin-page{% endblock %}

{% block navbar_content %}
<!-- Super Admin-specific Navbar -->
<ul class="navbar-nav me-auto">
    <li class="nav-item">
        <a class="nav-link" href="{{ url_for('super_admin') }}">
            <i class="fas fa-crown me-1"></i>Super Admin
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="#users">
            <i class="fas fa-users-cog me-1"></i>Users
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="#settings">
            <i class="fas fa-server me-1"></i>Settings
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="#logs">
            <i class="fas fa-clipboard-list me-1"></i>Logs
        </a>
    </li>
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
            <i class="fas fa-database me-1"></i>System
        </a>
        <ul class="dropdown-menu shadow-lg">
            <li><a class="dropdown-item" href="#database"><i class="fas fa-database me-2"></i>Database</a></li>
            <li><a class="dropdown-item" href="#backups"><i class="fas fa-save me-2"></i>Backups</a></li>
            <li><a class="dropdown-item" href="#maintenance"><i class="fas fa-tools me-2"></i>Maintenance</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#security"><i class="fas fa-lock me-2"></i>Security</a></li>
        </ul>
    </li>
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
            <i class="fas fa-globe me-1"></i>Global
        </a>
        <ul class="dropdown-menu shadow-lg">
            <li><a class="dropdown-item" href="{{ url_for('customer') }}"><i class="fas fa-home me-2"></i>Customer Portal</a></li>
            <li><a class="dropdown-item" href="{{ url_for('vendor') }}"><i class="fas fa-store me-2"></i>Vendor Portal</a></li>
            <li><a class="dropdown-item" href="{{ url_for('admin') }}"><i class="fas fa-shield-alt me-2"></i>Admin Portal</a></li>
        </ul>
    </li>
</ul>
{% endblock %}

{% block nav_actions %}
<a href="#" class="btn btn-outline-danger me-2" data-bs-toggle="modal" data-bs-target="#superAdminLoginModal">Super Admin Login</a>
{% endblock %}

{% block content %}
<!-- Super Admin Header -->
<section class="super-admin-header bg-gradient-danger text-white py-4">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h1 class="h3 fw-bold mb-2">
                    <i class="fas fa-crown me-2"></i>Super Admin Console
                </h1>
                <p class="mb-0">Complete system control and management</p>
            </div>
            <div class="col-md-4 text-md-end">
                <div class="super-admin-actions">
                    <button class="btn btn-outline-light me-2">
                        <i class="fas fa-shield-alt"></i>
                        <span class="badge bg-warning ms-1">2</span>
                    </button>
                    <div class="dropdown d-inline-block">
                        <button class="btn btn-outline-light dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="fas fa-user-shield me-2"></i>Super Admin
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Profile</a></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-key me-2"></i>Security</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- System Overview -->
<section class="py-4 bg-light">
    <div class="container">
        <div class="row g-3">
            <div class="col-lg-2 col-md-4 col-sm-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-server fa-2x text-danger mb-2"></i>
                        <h6 class="fw-bold text-success">Online</h6>
                        <small class="text-muted">System Status</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-users-cog fa-2x text-primary mb-2"></i>
                        <h6 class="fw-bold">0</h6>
                        <small class="text-muted">Admin Users</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-database fa-2x text-info mb-2"></i>
                        <h6 class="fw-bold">85%</h6>
                        <small class="text-muted">DB Usage</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-rupee-sign fa-2x text-success mb-2"></i>
                        <h6 class="fw-bold">â‚¹0</h6>
                        <small class="text-muted">Revenue</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-credit-card fa-2x text-warning mb-2"></i>
                        <h6 class="fw-bold">0</h6>
                        <small class="text-muted">Transactions</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6">
                <div class="card border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-exclamation-triangle fa-2x text-danger mb-2"></i>
                        <h6 class="fw-bold">0</h6>
                        <small class="text-muted">Alerts</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Super Admin Navigation -->
<section class="py-4">
    <div class="container">
        <ul class="nav nav-pills nav-fill" id="superAdminTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="users-control-tab" data-bs-toggle="pill" data-bs-target="#users-control">
                    <i class="fas fa-users-cog me-2"></i>User Control
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="system-logs-tab" data-bs-toggle="pill" data-bs-target="#system-logs">
                    <i class="fas fa-file-alt me-2"></i>System Logs
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="payments-tab" data-bs-toggle="pill" data-bs-target="#payments">
                    <i class="fas fa-credit-card me-2"></i>Payments
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="permissions-tab" data-bs-toggle="pill" data-bs-target="#permissions">
                    <i class="fas fa-shield-alt me-2"></i>Permissions
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="settings-tab" data-bs-toggle="pill" data-bs-target="#settings">
                    <i class="fas fa-cogs me-2"></i>Settings
                </button>
            </li>
        </ul>
        
        <div class="tab-content mt-4" id="superAdminTabsContent">
            <!-- User Control Tab -->
            <div class="tab-pane fade show active" id="users-control" role="tabpanel">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card border-0 shadow">
                            <div class="card-header bg-white py-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h5 class="fw-bold mb-0">Admin User Management</h5>
                                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#addAdminModal">
                                        <i class="fas fa-plus me-2"></i>Add Admin
                                    </button>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover mb-0">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Admin</th>
                                                <th>Role</th>
                                                <th>Last Login</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td colspan="5" class="text-center py-5">
                                                    <i class="fas fa-users-cog fa-3x text-muted mb-3"></i>
                                                    <p class="text-muted">No admin users found</p>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="card border-0 shadow">
                            <div class="card-header bg-white py-3">
                                <h6 class="fw-bold mb-0">Role Distribution</h6>
                            </div>
                            <div class="card-body">
                                <div class="role-stats">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span>Super Admins</span>
                                        <span class="badge bg-danger">1</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span>Admins</span>
                                        <span class="badge bg-primary">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <span>Moderators</span>
                                        <span class="badge bg-warning">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>Support Staff</span>
                                        <span class="badge bg-info">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- System Logs Tab -->
            <div class="tab-pane fade" id="system-logs" role="tabpanel">
                <div class="card border-0 shadow">
                    <div class="card-header bg-white py-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="fw-bold mb-0">System Audit Logs</h5>
                            <div class="d-flex gap-2">
                                <select class="form-select" style="width: 150px;">
                                    <option>All Levels</option>
                                    <option>Error</option>
                                    <option>Warning</option>
                                    <option>Info</option>
                                    <option>Debug</option>
                                </select>
                                <input type="date" class="form-control" style="width: 150px;">
                                <button class="btn btn-outline-primary">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div class="log-viewer" style="height: 500px; overflow-y: auto;">
                            <div class="text-center py-5">
                                <i class="fas fa-file-alt fa-3x text-muted mb-3"></i>
                                <p class="text-muted">No system logs available</p>
                                <small class="text-muted">Logs will appear here when system activities occur</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Payments Tab -->
            <div class="tab-pane fade" id="payments" role="tabpanel">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card border-0 shadow">
                            <div class="card-header bg-white py-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h5 class="fw-bold mb-0">Payment Dashboard</h5>
                                    <div class="d-flex gap-2">
                                        <select class="form-select" style="width: 150px;">
                                            <option>All Payments</option>
                                            <option>Successful</option>
                                            <option>Failed</option>
                                            <option>Pending</option>
                                        </select>
                                        <button class="btn btn-outline-primary">
                                            <i class="fas fa-download me-2"></i>Export
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover mb-0">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Transaction ID</th>
                                                <th>User</th>
                                                <th>Plan</th>
                                                <th>Amount</th>
                                                <th>Date</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td colspan="6" class="text-center py-5">
                                                    <i class="fas fa-credit-card fa-3x text-muted mb-3"></i>
                                                    <p class="text-muted">No payment transactions found</p>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="card border-0 shadow mb-3">
                            <div class="card-header bg-white py-3">
                                <h6 class="fw-bold mb-0">Revenue Overview</h6>
                            </div>
                            <div class="card-body">
                                <div class="revenue-stats">
                                    <div class="mb-3">
                                        <small class="text-muted">Today</small>
                                        <h4 class="fw-bold text-success">â‚¹0</h4>
                                    </div>
                                    <div class="mb-3">
                                        <small class="text-muted">This Month</small>
                                        <h4 class="fw-bold text-primary">â‚¹0</h4>
                                    </div>
                                    <div>
                                        <small class="text-muted">Total</small>
                                        <h4 class="fw-bold text-warning">â‚¹0</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card border-0 shadow">
                            <div class="card-header bg-white py-3">
                                <h6 class="fw-bold mb-0">Subscription Stats</h6>
                            </div>
                            <div class="card-body">
                                <div class="subscription-stats">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>Basic (Free)</span>
                                        <span class="badge bg-secondary">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>Premium (â‚¹5,999)</span>
                                        <span class="badge bg-primary">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>Ultimate (â‚¹9,999)</span>
                                        <span class="badge bg-warning">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Permissions Tab -->
            <div class="tab-pane fade" id="permissions" role="tabpanel">
                <div class="card border-0 shadow">
                    <div class="card-header bg-white py-3">
                        <h5 class="fw-bold mb-0">Role-Based Permission Manager</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-4">
                                <h6 class="fw-bold mb-3">Roles</h6>
                                <div class="list-group">
                                    <a href="#" class="list-group-item list-group-item-action active">
                                        <i class="fas fa-crown me-2"></i>Super Admin
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action">
                                        <i class="fas fa-user-shield me-2"></i>Admin
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action">
                                        <i class="fas fa-user-cog me-2"></i>Moderator
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action">
                                        <i class="fas fa-headset me-2"></i>Support Staff
                                    </a>
                                </div>
                            </div>
                            
                            <div class="col-lg-8">
                                <h6 class="fw-bold mb-3">Permissions for Super Admin</h6>
                                <div class="permissions-grid">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <div class="card border">
                                                <div class="card-header py-2">
                                                    <small class="fw-bold">User Management</small>
                                                </div>
                                                <div class="card-body py-2">
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox" checked disabled>
                                                        <label class="form-check-label">View Users</label>
                                                    </div>
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox" checked disabled>
                                                        <label class="form-check-label">Edit Users</label>
                                                    </div>
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox" checked disabled>
                                                        <label class="form-check-label">Delete Users</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6">
                                            <div class="card border">
                                                <div class="card-header py-2">
                                                    <small class="fw-bold">System Control</small>
                                                </div>
                                                <div class="card-body py-2">
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox" checked disabled>
                                                        <label class="form-check-label">System Settings</label>
                                                    </div>
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox" checked disabled>
                                                        <label class="form-check-label">View Logs</label>
                                                    </div>
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox" checked disabled>
                                                        <label class="form-check-label">Manage Payments</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Tab -->
            <div class="tab-pane fade" id="settings" role="tabpanel">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card border-0 shadow">
                            <div class="card-header bg-white py-3">
                                <h5 class="fw-bold mb-0">App-Wide Settings</h5>
                            </div>
                            <div class="card-body">
                                <form id="systemSettingsForm">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="appName" class="form-label">App Name</label>
                                            <input type="text" class="form-control" id="appName" value="Instoredealz">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="appVersion" class="form-label">App Version</label>
                                            <input type="text" class="form-control" id="appVersion" value="1.0.0">
                                        </div>
                                        <div class="col-12">
                                            <label for="appDescription" class="form-label">App Description</label>
                                            <textarea class="form-control" id="appDescription" rows="3">Smart in-store discounts for everyone</textarea>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="maintenanceMode" class="form-label">Maintenance Mode</label>
                                            <select class="form-select" id="maintenanceMode">
                                                <option value="0">Disabled</option>
                                                <option value="1">Enabled</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="maxDailyDeals" class="form-label">Max Daily Deals per Vendor</label>
                                            <input type="number" class="form-control" id="maxDailyDeals" value="10">
                                        </div>
                                        <div class="col-12">
                                            <button type="submit" class="btn btn-danger">
                                                <i class="fas fa-save me-2"></i>Save Settings
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="card border-0 shadow">
                            <div class="card-header bg-white py-3">
                                <h6 class="fw-bold mb-0">Quick Actions</h6>
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-danger">
                                        <i class="fas fa-database me-2"></i>Backup Database
                                    </button>
                                    <button class="btn btn-outline-warning">
                                        <i class="fas fa-broom me-2"></i>Clear Cache
                                    </button>
                                    <button class="btn btn-outline-info">
                                        <i class="fas fa-sync me-2"></i>Sync Data
                                    </button>
                                    <button class="btn btn-outline-success">
                                        <i class="fas fa-chart-bar me-2"></i>Generate Report
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<!-- Super Admin Login Modal -->
<div class="modal fade" id="superAdminLoginModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">
                    <i class="fas fa-crown me-2"></i>Super Admin Access
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    This area requires highest level authorization
                </div>
                <form id="superAdminLoginForm">
                    <div class="mb-3">
                        <label for="superAdminEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="superAdminEmail" required>
                    </div>
                    <div class="mb-3">
                        <label for="superAdminPassword" class="form-label">Password</label>
                        <input type="password" class="form-control" id="superAdminPassword" required>
                    </div>
                    <div class="mb-3">
                        <label for="superAdminOTP" class="form-label">2FA Code</label>
                        <input type="text" class="form-control" id="superAdminOTP" placeholder="6-digit code" required>
                    </div>
                    <button type="submit" class="btn btn-danger w-100">
                        <i class="fas fa-shield-alt me-2"></i>Authenticate
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Add Admin Modal -->
<div class="modal fade" id="addAdminModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add New Admin</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="addAdminForm">
                    <div class="mb-3">
                        <label for="newAdminName" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="newAdminName" required>
                    </div>
                    <div class="mb-3">
                        <label for="newAdminEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="newAdminEmail" required>
                    </div>
                    <div class="mb-3">
                        <label for="newAdminRole" class="form-label">Role</label>
                        <select class="form-select" id="newAdminRole" required>
                            <option value="">Select Role</option>
                            <option value="admin">Admin</option>
                            <option value="moderator">Moderator</option>
                            <option value="support">Support Staff</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-danger w-100">Create Admin</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
// Super Admin page specific JavaScript
document.addEventListener('DOMContentLoaded', function() {
    // Tab switching
    const pills = document.querySelectorAll('#superAdminTabs button');
    pills.forEach(pill => {
        pill.addEventListener('click', function() {
            pills.forEach(p => p.classList.remove('active'));
            this.classList.add('active');
        });
    });
    
    // Super Admin login form
    document.getElementById('superAdminLoginForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Super Admin authentication functionality will be implemented');
    });
    
    // Add Admin form
    document.getElementById('addAdminForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Add admin functionality will be implemented');
    });
    
    // System settings form
    document.getElementById('systemSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('System settings saved successfully!');
    });
    
    // Load system data
    function loadSystemData() {
        console.log('Loading super admin data...');
    }
    
    loadSystemData();
});
</script>
{% endblock %}
